#! /bin/sh

if [ "${1:-nothing}" = "nothing" ];
then
  echo 'Usage: ./changeGuiName "newGuiName" "yourFirstName" "yourLastName" "yourEmail"';
  exit 0;
fi

if [ "${2:-nothing}" = "nothing" ];
then
  echo 'Usage: ./changeGuiName "newGuiName" "yourFirstName" "yourLastName" "yourEmail"';
  exit 0;
fi

if [ "${3:-nothing}" = "nothing" ];
then
  echo 'Usage: ./changeGuiName "newGuiName" "yourFirstName" "yourLastName" "yourEmail"';
  exit 0;
fi

if [ "${4:-nothing}" = "nothing" ];
then
  echo 'Usage: ./changeGuiName "newGuiName" "yourFirstName" "yourLastName" "yourEmail"';
  exit 0;
fi

find . -name .svn -exec rm -rf {} \;

cat Makefile | sed -e "s/yade_include_subdir=/yade_include_subdir="$1"/"	> Makefile
cat Makefile | sed -e "s/yade_libnames_basename=/yade_libnames_basename="$1"/"  > Makefile

cd projects
cd kdevelop

mv yade-empty-gui.kdevelop $1.kdevelop
cat $1.kdevelop | sed -e "s/YourName/"$2" "$3"/"  > $1.kdevelop
cat $1.kdevelop | sed -e "s/YourEmail/"$4"/" > $1.kdevelop

cd templates

cat h | sed -e "s/YourName/"$2" "$3"/"  > h
cat h | sed -e "s/YourEmail/"$4"/" > h

cat cpp | sed -e "s/YourName/"$2" "$3"/"  > cpp
cat cpp | sed -e "s/YourEmail/"$4"/" > cpp

cd ..

rm -f yade-empty-gui.pro

echo 'TEMPLATE=subdirs'  > $1.pro
echo 'SUBDIRS='$1	 >> $1.pro

mv yade-empty-gui $1
cd $1

rm -f yade-empty-gui.pro
 
echo "# File generated by kdevelop's qmake manager."			>   $1.pro
echo '# ------------------------------------------- '			>>  $1.pro
echo '# Subdir relative project main directory: ./'$1			>>  $1.pro
echo '# Target is a library:  ../../../bin/'$1				>>  $1.pro
echo ' '								>>  $1.pro
echo 'QMAKE_gDIR = /usr/local/lib/yade/yade-libs/ '			>>  $1.pro
echo 'TARGET = ../../../bin/'$1	 					>>  $1.pro
echo 'CONFIG += release \'						>>  $1.pro
echo '          warn_on \'						>>  $1.pro
echo '          dll'							>>  $1.pro
echo 'TEMPLATE = lib'							>>  $1.pro

cd ../../../..
mv yade-empty-gui $1
