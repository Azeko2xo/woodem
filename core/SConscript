Import('*')
env.InstallAs(['$PREFIX/bin/yade$SUFFIX'],[
	env.Program('yade',
		env.Combine('core.cpp',['Body.cpp',
			'BodyContainer.cpp',
			'BoundingVolume.cpp',
			'Collider.cpp',
			'DeusExMachina.cpp',
			'FileGenerator.cpp',
			'FrontEnd.cpp',
			'GeometricalModel.cpp',
			'InteractingGeometry.cpp',
			'Interaction.cpp',
			'InteractionContainer.cpp',
			'GroupRelationData.cpp',
			'Material.cpp',
			'MetaBody.cpp',
			'MetaEngine.cpp',
			'NullGUI.cpp',
			'Omega.cpp',
			'Preferences.cpp',
			'SimulationFlow.cpp',
			'State.cpp',
			'ThreadRunner.cpp',
			'ThreadWorker.cpp',
			'TimeStepper.cpp',
			'yade.cpp',
			'containers/BodyVector.cpp',
			'containers/InteractionVecMap.cpp']
			+(['PhysicalParameters.cpp'] if 'physpar' in env['features'] else [])
			),
		LIBS=env['LIBS']+[
			'yade-support',
			'sqlite3x',
			'miniWm3',
			'rt', # realtime lib, for clock_gettime 
			]+
			(['$QGLVIEWER_LIB','yade-opengl'] if 'YADE_OPENGL' in env['CPPDEFINES'] else []),
		CPPDEFINES=env['CPPDEFINES']+[('YADE_VERSION','\\"'+env['realVersion']+'\\"'),]
		)
])
